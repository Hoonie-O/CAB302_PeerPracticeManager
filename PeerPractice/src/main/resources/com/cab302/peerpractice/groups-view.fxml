<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane fx:id="rootPane"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.cab302.peerpractice.Controllers.GroupController"
            prefWidth="1280"
            prefHeight="720"
            stylesheets="@styles/modern.css">

    <top>
        <fx:include source="header-layout.fxml"
                    fx:id="header"/>
    </top>


    <right>
        <fx:include source="profile-layout.fxml"
                    fx:id="profile"/>
    </right>


    <!-- Left Side Panel with Sidebar and Groups -->
    <left>
        <HBox>
        <!-- Include the sidebar/menu -->
        <fx:include source="sidebar-layout.fxml"
                    fx:id="menu"/>

            <VBox spacing="12" minWidth="280" maxWidth="320">
                <padding>
                    <Insets top="16"
                            left="16"
                            right="16"
                            bottom="16"/>
                </padding>

                <VBox spacing="10">
                    <Label text="My Groups"
                           styleClass="modern-label-heading"
                           style="-fx-font-size: 16px;"/>
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Button fx:id="addGroupButton"
                                text="+ New"
                                styleClass="modern-button"
                                onAction="#onAddGroup"
                                HBox.hgrow="ALWAYS"
                                maxWidth="Infinity"/>
                        <Button fx:id="sortGroupsButton"
                                text="Sort"
                                styleClass="modern-button-secondary"
                                onAction="#onSortGroups"
                                prefWidth="70"/>
                    </HBox>
                </VBox>

                <TextField fx:id="searchField"
                           styleClass="modern-text-field"
                           promptText="ðŸ” Search groups..."/>

                <ListView fx:id="groupListView"
                          VBox.vgrow="ALWAYS"
                          minHeight="400"/>

                <Button text="ðŸ“¨ Join Requests"
                        styleClass="modern-button-secondary"
                        maxWidth="Infinity"/>
            </VBox>
        </HBox>
    </left>

    <!-- Center Area with aligned tabs -->
    <center>
        <HBox HBox.hgrow="ALWAYS">

            <Separator orientation="VERTICAL"/>

            <VBox HBox.hgrow="ALWAYS">

                <!-- Header -->
                <VBox styleClass="modern-card">
                    <padding>
                        <Insets top="15"
                                left="20"
                                right="20"
                                bottom="15"/>
                    </padding>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label fx:id="groupNameLabel"
                               text="Example Group"
                               styleClass="modern-label-title"/>

                        <Region HBox.hgrow="ALWAYS"/>

                        <!-- More Button -->
                        <MenuButton fx:id="moreMenu"
                                    text="More"
                                    styleClass="modern-button-secondary"
                                    prefWidth="100">
                            <items>
                                <MenuItem text="Invite Members"
                                          onAction="#onInviteMembers"/>
                                <MenuItem text="Share Group ID"
                                          onAction="#onShareGroupID"/>
                                <SeparatorMenuItem/>
                                <MenuItem text="Manage Members"
                                          onAction="#onManageGroup"/>
                                <MenuItem text="Group Settings"
                                          onAction="#onGroupSettings"/>
                                <SeparatorMenuItem/>
                                <MenuItem text="Leave Group"
                                          onAction="#onLeaveGroup"/>
                                <MenuItem text="Delete Group"
                                          onAction="#onDeleteGroup"/>
                            </items>
                        </MenuButton>
                    </HBox>
                </VBox>

                <Separator/>

                <!-- Tabs -->
                <TabPane fx:id="groupTabs"
                         tabClosingPolicy="UNAVAILABLE"
                         tabMinWidth="90"
                         tabMaxWidth="90">
                    <VBox.margin>
                        <Insets top="0"
                                right="0"
                                bottom="0"
                                left="-4"/>
                    </VBox.margin>
                    <tabs>
                        <Tab text="Calendar"
                             closable="false"/>
                        <Tab text="Sessions"
                             closable="false"/>
                        <Tab text="Notes"
                             closable="false"/>
                        <Tab text="Chat"
                             closable="false"/>
                        <Tab text="Files"
                             closable="false"/>
                    </tabs>
                </TabPane>

                <!-- Content Area - placeholder that will be replaced by tab content -->
                <VBox alignment="CENTER"
                      VBox.vgrow="ALWAYS"
                      spacing="10">
                    <padding>
                        <Insets top="10"
                                left="10"
                                right="10"
                                bottom="10"/>
                    </padding>
                    <Label fx:id="tabContentLabel"
                           text="Select a tab to view content"/>
                </VBox>
            </VBox>
        </HBox>
    </center>
</BorderPane>